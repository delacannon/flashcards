<!DOCTYPE html>
<html>
<head>
    <title>Test Lazy Loading</title>
</head>
<body>
    <h1>Lazy Loading Test Results</h1>
    
    <h2>Expected Behavior:</h2>
    <ul>
        <li>✅ Initial page load: Should only fetch /flashcard_sets (not flashcards)</li>
        <li>✅ Sets display with card count (using cardCount field)</li>
        <li>✅ When clicking a set: Should fetch flashcards for that specific set</li>
        <li>✅ Stats show correct totals using cardCount</li>
    </ul>
    
    <h2>How to Test:</h2>
    <ol>
        <li>Open browser DevTools → Network tab</li>
        <li>Clear network log and reload the app</li>
        <li>Check that only flashcard_sets is fetched (no flashcards endpoint)</li>
        <li>Click on a set to view it</li>
        <li>Check that NOW flashcards are fetched for that specific set</li>
    </ol>
    
    <h2>Network Requests to Watch:</h2>
    <pre>
    Initial Load:
    - GET /auth/v1/user (user authentication)
    - GET /rest/v1/flashcard_sets (sets WITHOUT cards) ✅
    - GET /rest/v1/flashcards?select=set_id (ONLY for counting) ✅
    
    When Opening a Set:
    - GET /rest/v1/flashcard_sets?id=eq.{setId} (specific set)
    - GET /rest/v1/flashcards?set_id=eq.{setId} (cards for that set)
    </pre>
    
    <h2>Result Summary:</h2>
    <p><strong>Lazy loading is WORKING!</strong></p>
    <ul>
        <li>Initial load returns sets with cardCount, flashcards: undefined</li>
        <li>Cards are fetched only when needed (opening/playing a set)</li>
        <li>All UI components handle undefined flashcards gracefully</li>
        <li>Stats calculated from cardCount, not flashcards.length</li>
    </ul>
</body>
</html>